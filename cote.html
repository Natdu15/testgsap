<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apprendre à mieux vous connaître</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js"></script>
  <style>
    body, html {
  overscroll-behavior: none;
  min-height: 100vh;
}

.swipe-section {
  position: relative;
  height: 100vh;
  width: 100%;
  overflow: visible;
}

.swipe-section .panel {
  position: absolute;
}

.vh-200 {
  height: 200vh !important;
}

.panel.plain {
  flex-direction: column;
}
  </style>
    </head>
    <body>
    
        <div class="swipe-section">
      <div class="description panel">
        <div>
            <h1>ScrollTrigger.observe() sections</h1>
            <div class="scroll-down">Scroll down<div class="arrow"></div>
        </div>
      </div>
      <section class="panel light x-100">
        <h2 class="panel__number">2</h2>
      </section>
      <section class="panel x-100">
        <h2 class="panel__number">3</h2>
      </section>
      <section class="panel light x-100">
        <h2 class="panel__number">4</h2>
      </section>
      <section class="panel plain x-100 vh-200">
        <h2>This section should switch to vertical scroll.</h2>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
        <p>This is placeholder text meant to help get a sense of spacing, rhythm, and overall layout. It’s not about meaning right now, just about flow. The focus is on structure, not story. As elements fall into place, you’ll start to notice how small adjustments make a big difference. Maybe the alignment needs a nudge, or the spacing feels tight in one section and too loose in another. That’s part of the process. Things shift around until they feel right. You can swap this out later once the content is ready, but for now, it helps to see how the design holds up with real-ish copy. No need to overthink it. Just keep moving, test different things, and see what works in context.</p>
    
      </section>
    </div>

<!-- spacer -->
<div style="height: 400vh"></div>
<script>
  gsap.registerPlugin(ScrollTrigger);

// need to stop at a section mid-page? See this demo: https://codepen.io/GreenSock/pen/MWGVJYL?editors=0010

// Gsap Code
let currentIndex = -1;
let animating;
let swipePanels = gsap.utils.toArray(".swipe-section .panel");

// set second panel two initial 100%
gsap.set(".x-100", {xPercent: 100});

// set z-index levels for the swipe panels
gsap.set(swipePanels, {
  zIndex: i => i
});

// create an observer and disable it to start
let intentObserver = ScrollTrigger.observe({
  type: "wheel,touch",
  onUp: () => !animating && gotoPanel(currentIndex + 1, true),
  onDown: () => !animating && gotoPanel(currentIndex - 1, false),
  wheelSpeed: -1,
  tolerance: 10,
  preventDefault: true,
  onPress: self => {
    // on touch devices like iOS, if we want to prevent scrolling, we must call preventDefault() on the touchstart (Observer doesn't do that because that would also prevent side-scrolling which is undesirable in most cases)
    ScrollTrigger.isTouch && self.event.preventDefault()
  }
})
intentObserver.disable();

// handle the panel swipe animations
function gotoPanel(index, isScrollingDown) {
  animating = true;
  // return to normal scroll if we're at the end or back up to the start
  if ((index === swipePanels.length && isScrollingDown) || (index === -1 && !isScrollingDown)) {

        let target = index;
        gsap.to(target, {
        // xPercent: isScrollingDown ? -100 : 0,
        duration: 0.00,
        onComplete: () => {
          animating = false;
          isScrollingDown && intentObserver.disable();
        }
    });
    return
  }

//   target the second panel, last panel?
  let target = isScrollingDown ? swipePanels[index]: swipePanels[currentIndex];

  gsap.to(target, {
    xPercent: isScrollingDown ? 0 : 100,
    duration: 0.75,
    onComplete: () => {
      animating = false;
    }
  });
  currentIndex = index;
  console.log(index);

}

// pin swipe section and initiate observer
ScrollTrigger.create({
  trigger: ".swipe-section",
  pin: true,
  start: "top top",
  end: "+=1",
  onEnter: (self) => {
    intentObserver.enable();
    gotoPanel(currentIndex + 1, true);    
  },
  onEnterBack: () => {
    intentObserver.enable();
    gotoPanel(currentIndex - 1, false);
  }
})
</script>
</body>
</html>
